<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Media Optimizer - Analyseur & Optimiseur Multimédia</title>
    <meta name="description" content="Analysez vos fichiers vidéo et obtenez des recommandations d'optimisation intelligentes pour Plex, NAS et streaming.">
    <link rel="stylesheet" href="css/style.css">
    <!-- Font Awesome 6.7.0 (2026) - Corrige les warnings -->
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.7.0/css/all.min.css">
</head>
<body>
    <!-- Header -->
    <header class="header">
        <div class="container">
            <div class="header-content">
                <div class="logo">
                    <i class="fas fa-film"></i>
                    <span>Media Optimizer</span>
                </div>
                <nav class="nav">
                    <a href="#features" class="nav-link">Fonctionnalités</a>
                    <a href="#about" class="nav-link">À propos</a>
                    <a href="https://github.com/Ivane-Ba/media-optimizer" class="nav-link" target="_blank">
                        <i class="fab fa-github"></i> GitHub
                    </a>
                    <button class="theme-toggle" id="themeToggle" title="Changer le thème">
                        <i class="fas fa-sun"></i>
                    </button>
                </nav>
            </div>
        </div>
    </header>

    <!-- Hero Section -->
    <section class="hero">
        <div class="container">
            <h1 class="hero-title">Optimisez vos fichiers vidéo</h1>
            <p class="hero-subtitle">Analyse précise • Batch automatique • Recommandations codec • Compatibilité Plex</p>
        </div>
    </section>

    <!-- Main App -->
    <main class="main-app">
        <div class="container">
            
            <!-- Section 1: Upload -->
            <div class="card" id="upload-section">
                <div class="card-header">
                    <i class="fas fa-upload"></i>
                    <h2>1. Chargez vos fichiers</h2>
                </div>
                <div class="card-body">
                    <div class="dropzone" id="dropzone">
                        <i class="fas fa-cloud-upload-alt"></i>
                        <p class="dropzone-text">Glissez-déposez un ou plusieurs fichiers vidéo ici</p>
                        <p class="dropzone-subtext">ou cliquez pour sélectionner</p>
                        <input type="file" id="fileInput" accept="video/*" multiple hidden>
                    </div>
                    <div class="file-info" id="fileInfo" style="display: none;">
                        <div class="file-icon">
                            <i class="fas fa-file-video"></i>
                        </div>
                        <div class="file-details">
                            <p class="file-name" id="fileName"></p>
                            <p class="file-size" id="fileSize"></p>
                        </div>
                        <button class="btn-remove" id="removeFile">
                            <i class="fas fa-times"></i>
                        </button>
                    </div>
                </div>
            </div>

            <!-- Section Batch: Multiple Files -->
            <div class="card" id="batch-section" style="display: none;">
                <div class="card-header">
                    <i class="fas fa-layer-group"></i>
                    <h2>Analyse en Batch</h2>
                    <div class="batch-stats">
                        <span id="batchCount">0 fichiers</span>
                    </div>
                </div>
                <div class="card-body">
                    <div class="batch-table-container">
                        <table class="batch-table" id="batchTable">
                            <thead>
                                <tr>
                                    <th>Fichier</th>
                                    <th>Taille</th>
                                    <th>Codec</th>
                                    <th>Résolution</th>
                                    <th>Optimisé</th>
                                    <th>Économie</th>
                                    <th>Actions</th>
                                </tr>
                            </thead>
                            <tbody id="batchTableBody">
                                <!-- Filled by JS -->
                            </tbody>
                            <tfoot>
                                <tr class="batch-total">
                                    <td colspan="4"><strong>TOTAL</strong></td>
                                    <td id="batchTotalOptimized">-</td>
                                    <td id="batchTotalSaved">-</td>
                                    <td></td>
                                </tr>
                            </tfoot>
                        </table>
                    </div>
                    <div class="batch-actions">
                        <button class="btn-primary" id="generateBatchScript">
                            <i class="fas fa-file-code"></i> Générer Script Batch
                        </button>
                        <button class="btn-secondary" id="exportBatchCSV">
                            <i class="fas fa-file-csv"></i> Export CSV
                        </button>
                    </div>
                </div>
            </div>

            <!-- Section 2: Analysis -->
            <div class="card" id="analysis-section" style="display: none;">
                <div class="card-header">
                    <i class="fas fa-chart-line"></i>
                    <h2>2. Métadonnées du fichier</h2>
                </div>
                <div class="card-body">
                    <div class="metadata-grid" id="metadataGrid">
                        <!-- Filled by JS -->
                    </div>
                    <div class="codec-visualization">
                        <canvas id="bitrateChart"></canvas>
                    </div>
                </div>
            </div>

            <!-- Section 3: Recommendations -->
            <div class="card" id="recommendations-section" style="display: none;">
                <div class="card-header">
                    <i class="fas fa-lightbulb"></i>
                    <h2>3. Recommandations d'optimisation</h2>
                </div>
                <div class="card-body">
                    <!-- Profils unifiés -->
                    <div class="preset-selector">
                        <label><i class="fas fa-sliders-h"></i> Choisir un profil d'optimisation :</label>
                        
                        <!-- Catégorie : Appareils -->
                        <div class="profile-category">
                            <h4><i class="fas fa-devices"></i> Appareils & Plateformes</h4>
                            <div class="device-profiles">
                                <button class="device-profile-btn" data-profile="plex-4k">
                                    <i class="fas fa-server"></i>
                                    <span class="profile-name">Plex 4K HDR</span>
                                </button>
                                <button class="device-profile-btn" data-profile="plex-1080p">
                                    <i class="fas fa-tv"></i>
                                    <span class="profile-name">Plex 1080p</span>
                                </button>
                                <button class="device-profile-btn" data-profile="mobile">
                                    <i class="fas fa-mobile-screen"></i>
                                    <span class="profile-name">Mobile</span>
                                </button>
                                <button class="device-profile-btn" data-profile="nas">
                                    <i class="fas fa-hard-drive"></i>
                                    <span class="profile-name">NAS</span>
                                </button>
                                <button class="device-profile-btn" data-profile="youtube">
                                    <i class="fab fa-youtube"></i>
                                    <span class="profile-name">YouTube</span>
                                </button>
                                <button class="device-profile-btn" data-profile="appletv">
                                    <i class="fab fa-apple"></i>
                                    <span class="profile-name">Apple TV</span>
                                </button>
                            </div>
                        </div>
                        
                        <!-- Catégorie : Usage -->
                        <div class="profile-category">
                            <h4><i class="fas fa-cogs"></i> Par usage</h4>
                            <div class="device-profiles">
                                <button class="device-profile-btn active" data-profile="balanced">
                                    <i class="fas fa-balance-scale"></i>
                                    <span class="profile-name">Équilibré</span>
                                </button>
                                <button class="device-profile-btn" data-profile="quality">
                                    <i class="fas fa-star"></i>
                                    <span class="profile-name">Qualité Max</span>
                                </button>
                                <button class="device-profile-btn" data-profile="compression">
                                    <i class="fas fa-compress"></i>
                                    <span class="profile-name">Compression Max</span>
                                </button>
                                <button class="device-profile-btn" data-profile="anime">
                                    <i class="fas fa-dragon"></i>
                                    <span class="profile-name">Anime</span>
                                </button>
                            </div>
                        </div>
                    </div>

                    <div class="recommendations-grid" id="recommendationsGrid">
                        <!-- Filled by JS -->
                    </div>

                    <div class="compatibility-badges">
                        <div class="badge badge-success" id="plexBadge">
                            <i class="fas fa-check-circle"></i> Compatible Plex
                        </div>
                        <div class="badge badge-info" id="gpuBadge">
                            <i class="fas fa-microchip"></i> GPU Acceleration disponible
                        </div>
                        <div class="badge badge-warning" id="nasBadge">
                            <i class="fas fa-server"></i> Optimisé NAS
                        </div>
                    </div>
                </div>
            </div>

            <!-- Section 4: Command Generator -->
            <div class="card" id="command-section" style="display: none;">
                <div class="card-header">
                    <i class="fas fa-terminal"></i>
                    <h2>4. Commande ffmpeg générée</h2>
                </div>
                <div class="card-body">
                    <div class="command-actions">
                        <button class="btn-compare" id="compareProfilesBtn">
                            <i class="fas fa-balance-scale"></i> Comparer d'autres profils
                        </button>
                    </div>
                    <div class="command-box">
                        <pre id="ffmpegCommand"></pre>
                        <button class="btn-copy" id="copyCommand">
                            <i class="fas fa-copy"></i> Copier
                        </button>
                    </div>
                    <div class="command-explanation" id="commandExplanation">
                        <!-- Filled by JS -->
                    </div>
                </div>
            </div>

            <!-- Section 4.5: Profile Comparison -->
            <div class="card" id="comparison-section" style="display: none;">
                <div class="card-header">
                    <i class="fas fa-balance-scale"></i>
                    <h2>Comparaison de profils</h2>
                    <button class="btn-close-comparison" id="closeComparison" title="Fermer">
                        <i class="fas fa-times"></i>
                    </button>
                </div>
                <div class="card-body">
                    <div class="comparison-selector">
                        <p><i class="fas fa-info-circle"></i> Sélectionnez 2 ou 3 profils à comparer :</p>
                        <div class="profile-chips" id="comparisonProfileSelector">
                            <!-- Filled by JS -->
                        </div>
                    </div>
                    <div class="comparison-table-container" id="comparisonTableContainer">
                        <!-- Filled by JS -->
                    </div>
                </div>
            </div>

            <!-- Section 5: Savings Estimate -->
            <div class="card" id="savings-section" style="display: none;">
                <div class="card-header">
                    <i class="fas fa-piggy-bank"></i>
                    <h2>5. Économie d'espace estimée</h2>
                </div>
                <div class="card-body">
                    <div class="savings-visual">
                        <div class="savings-bars">
                            <div class="bar-original">
                                <div class="bar-fill" id="originalBar"></div>
                                <span class="bar-label">Original</span>
                                <span class="bar-value" id="originalSize"></span>
                            </div>
                            <div class="bar-optimized">
                                <div class="bar-fill" id="optimizedBar"></div>
                                <span class="bar-label">Optimisé</span>
                                <span class="bar-value" id="optimizedSize"></span>
                            </div>
                        </div>
                        <div class="savings-summary">
                            <div class="savings-stat">
                                <i class="fas fa-arrow-down"></i>
                                <span class="stat-value" id="savingsPercent"></span>
                                <span class="stat-label">Réduction</span>
                            </div>
                            <div class="savings-stat">
                                <i class="fas fa-database"></i>
                                <span class="stat-value" id="savedSpace"></span>
                                <span class="stat-label">Espace économisé</span>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </main>

    <!-- Features Section -->
    <section class="features" id="features">
        <div class="container">
            <h2 class="section-title">Fonctionnalités</h2>
            <div class="features-grid">
                <div class="feature-card">
                    <i class="fas fa-brain"></i>
                    <h3>Analyse Intelligente</h3>
                    <p>Détection automatique des codecs, bitrate, résolution et métadonnées</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-code"></i>
                    <h3>Commandes FFmpeg</h3>
                    <p>Génération de commandes optimisées prêtes à l'emploi</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-tv"></i>
                    <h3>Compatible Plex</h3>
                    <p>Recommandations adaptées pour Plex Media Server</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-rocket"></i>
                    <h3>GPU Acceleration</h3>
                    <p>Détection des possibilités d'encodage GPU</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-sliders-h"></i>
                    <h3>Presets Multiples</h3>
                    <p>Anime, Film, Série avec paramètres adaptés</p>
                </div>
                <div class="feature-card">
                    <i class="fas fa-chart-bar"></i>
                    <h3>Estimations Précises</h3>
                    <p>Calcul des gains d'espace avant encodage</p>
                </div>
            </div>
        </div>
    </section>

    <!-- About Section -->
    <section class="about" id="about">
        <div class="container">
            <h2 class="section-title">À propos</h2>
            <div class="about-content">
                <p>Media Optimizer est un outil web qui analyse vos fichiers vidéo et génère des recommandations d'optimisation intelligentes.</p>
                <p>Entièrement côté client, aucune donnée n'est envoyée à un serveur. Vos fichiers restent privés.</p>
                <div class="tech-stack">
                    <span class="tech-badge">HTML5</span>
                    <span class="tech-badge">CSS3</span>
                    <span class="tech-badge">JavaScript</span>
                    <span class="tech-badge">Chart.js</span>
                </div>
            </div>
        </div>
    </section>

    <!-- Footer -->
    <footer class="footer">
        <div class="container">
            <p>&copy; 2026 Media Optimizer • Développé par Ivane Bagashvili</p>
            <div class="footer-links">
                <a href="https://github.com/Ivane-Ba" target="_blank" title="GitHub Profile"><i class="fab fa-github"></i></a>
                <a href="https://www.linkedin.com/in/ivane-bagashvili-386a1039b/" target="_blank" title="LinkedIn Profile"><i class="fab fa-linkedin"></i></a>
            </div>
        </div>
    </footer>

    <!-- Scripts -->
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    
    <!-- MediaInfo.js - Version UMD locale avec WASM -->
    <script src="lib/mediainfo.js"></script>
    
    <script src="js/codecDatabase.js"></script>
    <script src="js/realMetadataExtractor.js"></script>
    <script src="js/mediaAnalyzer.js"></script>
    <script src="js/optimizationEngine.js"></script>
    <script src="js/batchManager.js"></script>
    <script src="js/app.js"></script>
</body>
</html>
